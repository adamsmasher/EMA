v1

split cleanly into three passes:

pass 1 (macro extraction)
create a set of macros

pass 2 (analysis)
create symbol table
set addresses
expand macros
remove sections, turn into a stream of code

pass 3 (code generation):
generate code


align and alignment issues
macros
space
bss sections/variable declarations
ascii/asciiz
bad arguments
full exprs?

v2
auto-alignment on constants, align 0 to disable
variadic/poly-arity macros?
poly-arity instructions?
local labels
